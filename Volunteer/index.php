<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Li Beirut</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="icon" type="image/png" href="../images/image-removebg-preview (22).png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/script.js" language="javascript"></script>
</head>

<body>
    <?php require("Config.php");
    include("header.php"); ?>
    <img src="../images/لبيروت___8_-removebg-preview.png" alt="" style="width:100%; height:350px; background-image:url(../images/homeb.jpg); background-size: 100% auto; background-position: center; background-repeat: no-repeat;">

    <div style="background-color:whitesmoke;">
        <section class="vh-90 gradient-custom">
            <div class="container py-5 h-100">
                <div class="row d-flex justify-content-center align-items-center h-100">
                    <div class="col col-xl-10">
                        <div class="card">
                            <div class="card-body py-5">

                                <!-- Carousel wrapper -->
                                <div id="carouselDarkVariant" class="carousel slide carousel-dark" data-bs-ride="carousel">
                                    <!-- Indicators -->
                                    <div class="carousel-indicators">
                                        <button type="button" data-bs-target="#carouselDarkVariant" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                                        <button type="button" data-bs-target="#carouselDarkVariant" data-bs-slide-to="1" aria-label="Slide 2"></button>
                                        <button type="button" data-bs-target="#carouselDarkVariant" data-bs-slide-to="2" aria-label="Slide 3"></button>
                                    </div>

                                    <!-- Inner -->
                                    <div class="carousel-inner">
                                        <!-- Single item -->
                                        <div class="carousel-item active">
                                            <div class="row d-flex justify-content-center">
                                                <div class="col-md-8 col-lg-9 col-xl-8">
                                                    <div class="d-flex">
                                                        <div class="flex-shrink-0">
                                                            <img src="../images/جوزيف حرب.jpg" class="rounded-circle mb-4 mb-lg-0 shadow-2" alt="جوزيف حرب" width="92" height="92">
                                                        </div>
                                                        <div class="flex-grow-1 ms-4 ps-3">
                                                            <figure>
                                                                <blockquote class="blockquote mb-4">
                                                                    <p>
                                                                        <i class="fa fa-quote-left" aria-hidden="true" style="color: #991a1a;"></i>
                                                                        <span class="font-italic">
                                                                            لِبيروت... من قلبي سلامٌ لِبيروت<br> وقُبل للبحر والبيوت
                                                                            لصخرةٍ كأنها، وجه بحارٍ قديمِ <br>هي من، روحِ الشعب خمرٌ
                                                                            هي من، عرقِهِ خبزٌ وياسمين
                                                                        </span>
                                                                    </p>
                                                                </blockquote>
                                                                <figcaption class="blockquote-footer">
                                                                    جوزيف حرب
                                                                </figcaption>
                                                            </figure>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Single item -->
                                        <div class="carousel-item">
                                            <div class="row d-flex justify-content-center">
                                                <div class="col-md-8 col-lg-9 col-xl-8">
                                                    <div class="d-flex">
                                                        <div class="flex-shrink-0">
                                                            <img src="../images/Unknown_person.jpg" class="rounded-circle mb-4 mb-lg-0 shadow-2" alt="Unkown" width="92" height="92">
                                                        </div>
                                                        <div class="flex-grow-1 ms-4 ps-3">
                                                            <figure>
                                                                <blockquote class="blockquote mb-4">
                                                                    <p>
                                                                        <i class="fa fa-quote-left" aria-hidden="true" style="color: #991a1a;"></i>
                                                                        <span class="font-italic">Volunteering is the ultimate exercise in democracy. You vote in elections once a year, but when you volunteer, you vote every day about the kind of community you want to live in.</span>
                                                                    </p>
                                                                </blockquote>
                                                                <figcaption class="blockquote-footer">
                                                                    Unknown
                                                                </figcaption>
                                                            </figure>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Single item -->
                                        <div class="carousel-item">
                                            <div class="row d-flex justify-content-center">
                                                <div class="col-md-8 col-lg-9 col-xl-8">
                                                    <div class="d-flex">
                                                        <div class="flex-shrink-0">
                                                            <img src="../images/margaretwheatley.jpg" class="rounded-circle mb-4 mb-lg-0 shadow-2" alt="Margaret J. Wheatley" width="92" height="92">
                                                        </div>
                                                        <div class="flex-grow-1 ms-4 ps-3">
                                                            <figure>
                                                                <blockquote class="blockquote mb-4">
                                                                    <p>
                                                                        <i class="fa fa-quote-left" aria-hidden="true" style="color: #991a1a;"></i>
                                                                        <span class="font-italic">There is no power for change<br> greater than a community<br> discovering what it cares about.<br></span>
                                                                    </p>
                                                                </blockquote>
                                                                <figcaption class="blockquote-footer">
                                                                    Margaret J. Wheatley
                                                                </figcaption>
                                                            </figure>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Inner -->
                                    <br><br>
                                    <!-- Controls -->
                                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselDarkVariant" data-bs-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">Previous</span>
                                    </button>
                                    <button class="carousel-control-next" type="button" data-bs-target="#carouselDarkVariant" data-bs-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">Next</span>
                                    </button>
                                </div>
                                <!-- Carousel wrapper -->

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <center>
            <div class="row" style="width: 72.55%; max-width:100%; text-align:center;">
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title" style="color:#991a1a;">Volunteer</h5>
                            <h1><i class="fa fa-users" aria-hidden="true" style="color:#991a1a;"></i><br></h1>
                            <p class="card-text">Are you ready to make a difference? <br>Sign up to volunteer today and be a part of our community-driven efforts to support Beirut!</p>
                            <a href="Register.php" class="btn btn-secondary">Sign-Up</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title" style="color:#991a1a;">NGO</h5>
                            <h1><i class="fa fa-handshake-o" aria-hidden="true" style="color:#991a1a;"></i><br></h1>
                            <p class="card-text">Join us in our mission to build a stronger, more resilient Beirut.<br> Register with us today and let's make a difference together!</p><br>
                            <a href="Register.php" class="btn btn-secondary">Register</a>
                        </div>
                    </div>
                </div>
            </div>
        </center>
        <br>
    </div>
    <div class="container mt-5" style="text-align: center;">
        <div class="divider d-flex type" id="about">
            <h3 class="mx-3 mb-0 or" id="about">About Beirut</h3>
        </div><br>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col">
                <div class="card h-100">
                    <div class="d-flex justify-content-center align-items-center" style="height: 100px;">
                        <img src="../images/historyB.png" class="card-img-top" alt="History" style="width:100px; height:100px;">
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" style="color: #991a1a;">History</h5>
                        <p class="card-text">Beirut has a history over 5,000 years. Originally a Phoenician port, it became a key Mediterranean trade and cultural center. Despite severe damage during the Lebanese Civil War (1975-1990), Beirut has resiliently rebuilt into a vibrant, modern city.</p>
                        <a href="../history.php" class="btn btn-secondary btn-sm btn-view-more">View More</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card h-100">
                    <div class="d-flex justify-content-center align-items-center" style="height: 100px;">
                        <img src="../images/sites.png" class="card-img-top" alt="Main Sites" style="width:100px; height:100px;">
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" style="color: green;">Main Sites</h5>
                        <p class="card-text">Beirut, Lebanon's capital, features iconic landmarks like Pigeon Rocks at Al Rawche, vibrant neighborhoods such as Hamra, Gemmayze, and Mar Mikhael, along with cultural hubs like Saifi Village and Clemenceau.</p>
                        <a href="../sites.php" class="btn btn-secondary btn-sm btn-view-more">View More</a>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card h-100">
                    <div class="d-flex justify-content-center align-items-center" style="height: 100px;">
                        <img src="../images/peaceB.png" class="card-img-top" alt="Religious Sites" style="width:100px; height:100px;">
                    </div>
                    <div class="card-body">
                        <h5 class="card-title" style="color: #991a1a;">Religious Sites</h5>
                        <p class="card-text">Beirut is a city of diverse religious heritage. It features mosques, churches, and other religious sites that reflect its rich cultural tapestry. These sites are not only places of worship but also symbols of Beirut's history and spirit of inclusivity.</p>
                        <a href="../religiousSites.php" class="btn btn-secondary btn-sm btn-view-more">View More</a>
                    </div>
                </div>
            </div>
        </div>

        <style>
            .card-body .btn-view-more {
                display: none;
            }

            .card-body:hover .btn-view-more {
                display: block;
            }
        </style>
    </div><br><br>
    <div class="container" id="result">
        <div class="row justify-content-center">
            <div id="result">
                <div class="divider d-flex type" id="upcoming">
                    <h3 class="mx-3 mb-0 or" id="upcoming">Upcoming Events</h3>
                </div>
                <br>
                <div id="event1Carousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <?php
                        $current_date = date("Y-m-d");
                        $query = "SELECT * FROM events WHERE Date >= '$current_date'";
                        $result = mysqli_query($con, $query);
                        $count = 0;
                        $active = 'active'; // Set the first item as active
                        while ($row = mysqli_fetch_array($result)) {
                            if ($count % 3 == 0) {
                                // Start a new carousel item for every 3 events
                                echo '<div class="carousel-item ' . $active . '">';
                                echo '<div class="row">';
                                $active = ''; // Remove active class after the first item
                            }
                            echo '<div class="col-md-4">';
                            echo '<div class="card" style="margin: 10px; border: 1px solid #ddd;">';
                            $imagePath = '../images/' . $row["Poster"];
                            if (!file_exists($imagePath)) {
                                $imagePath = '../uploads/' . $row["Poster"];
                            }
                            echo '<img src="' . $imagePath . '" class="card-img-top" alt="Event Poster" style="height: 390px;">';

                            echo '<div class="card-body" style="text-align: center; height:160px">';
                            echo '<h3 class="card-title" style="color: #991a1a;">' . $row["Title"] . '</h3>';
                            echo '<p class="card-text"><i class="fa fa-map-marker" aria-hidden="true"></i> ' . $row["Location"] . '</p>';
                            $id = $row["EventId"]; // Item Id
                            $id = base64_encode($id);
                            echo "<div class='check'><a class='btn btn-secondary' href='Details.php?x=$id'>More Details</a></div><br>";
                            echo '</div></div>';
                            echo '</div>';
                            $count++;
                            if ($count % 3 == 0) {
                                // Close the row and carousel item after every 3 events
                                echo '</div>';
                                echo '</div>';
                            }
                        }
                        // Close the last row and carousel item if the total number of events is not a multiple of 3
                        if ($count % 3 != 0) {
                            echo '</div>';
                            echo '</div>';
                        }
                        ?>

                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#event1Carousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#event1Carousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                <br>

                <div class="divider d-flex type" id="previous">
                    <h3 class="mx-3 mb-0 or" id="previous">Previous Events</h3>
                </div>
                <br>
                <div id="event2Carousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <?php
                        $current_date = date("Y-m-d");
                        $query = "SELECT * FROM events WHERE Date <= '$current_date'";
                        $result = mysqli_query($con, $query);
                        $count = 0;
                        $active = 'active'; // Set the first item as active
                        while ($row = mysqli_fetch_array($result)) {
                            if ($count % 3 == 0) {
                                // Start a new carousel item for every 3 events
                                echo '<div class="carousel-item ' . $active . '">';
                                echo '<div class="row">';
                                $active = ''; // Remove active class after the first item
                            }
                            echo '<div class="col-md-4">';
                            echo '<div class="card" style="margin: 10px; border: 1px solid #ddd;">';
                            $imagePath = '../images/' . $row["Poster"];
                            if (!file_exists($imagePath)) {
                                $imagePath = '../uploads/' . $row["Poster"];
                            }
                            echo '<img src="' . $imagePath . '" class="card-img-top" alt="Event Poster" style="height: 390px;">';

                            echo '<div class="card-body" style="text-align: center; height:160px">';
                            echo '<h3 class="card-title" style="color: #991a1a;">' . $row["Title"] . '</h3>';
                            echo '<p class="card-text"><i class="fa fa-map-marker" aria-hidden="true"></i> ' . $row["Location"] . '</p>';
                            $id = $row["EventId"]; // Item Id
                            $id = base64_encode($id);
                            echo "<div class='check'><a class='btn btn-secondary' href='Details.php?x=$id'>More Details</a></div><br>";
                            echo '</div></div>';
                            echo '</div>';
                            $count++;
                            if ($count % 3 == 0) {
                                // Close the row and carousel item after every 3 events
                                echo '</div>';
                                echo '</div>';
                            }
                        }
                        // Close the last row and carousel item if the total number of events is not a multiple of 3
                        if ($count % 3 != 0) {
                            echo '</div>';
                            echo '</div>';
                        }
                        ?>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#event2Carousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#event2Carousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div><br>
    <div class="divider d-flex type" id="ngo">
        <h3 class="mx-3 mb-0 or" id="ngo">Featured NGOs</h3>
    </div>
    <div class="container mt-4">
        <div id="ngos" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <?php
                $query = "SELECT * FROM ngo";
                $result = mysqli_query($con, $query);
                $count = 0;
                $totalEvents = mysqli_num_rows($result);
                while ($row = mysqli_fetch_array($result)) {
                    if ($count % 4 == 0) {
                        $active = $count == 0 ? "active" : "";
                        echo "<div class='carousel-item $active'><div class='row'>";
                    }
                    $id = base64_encode($row["NGOId"]);
                ?>
                    <div class="col-md-3">
                        <div class="card" style="border-radius: 15px;">
                            <div class="card-body ngo-card text-center">
                                <div class="mt-3 mb-4">
                                    <?php
                                    $imagePath = '../images/' . $row["Logo"];
                                    if (!file_exists($imagePath)) {
                                        $imagePath = '../uploads/' . $row["Logo"];
                                    }
                                    echo '<img src="' . $imagePath . '"  class="rounded-circle img-fluid" style="width: 100px;">';
                                    ?><br><br>
                                    <h5 class="card-title"><?php echo $row["Name"]; ?></h5><br>
                                    <?php
                                    echo '<div class="social-media-links">';
                                    $socialMediaLinks = explode("\n", $row["SocialMediaLinks"]);
                                    foreach ($socialMediaLinks as $link) {
                                        list($platform, $url) = explode(":", $link, 2);
                                        echo '<a href="' . $url . '" target="_blank" class="social-media-link">';
                                        echo '<i class="fa fa-' . getSocialMediaIcon(trim($platform)) . ' fa-lg"></i>';
                                        echo '</a>';
                                    }
                                    echo '</div>';
                                    ?>
                                </div>
                            </div>
                        </div>
                    </div>
                <?php
                    $count++;
                    if ($count % 4 == 0 || $count == $totalEvents) {
                        echo "</div></div>";
                    }
                }
                function getSocialMediaIcon($platform)
                {
                    switch ($platform) {
                        case 'Facebook':
                            return 'facebook-f';
                        case 'Instagram':
                            return 'instagram';
                        case 'Website':
                            return 'globe';
                        default:
                            return '';
                    }
                }
                ?>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#ngos" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#ngos" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div><br><br>
    <style>
        /* Style for social media links container */
        .social-media-links {
            margin-top: 10px;
            /* Add top margin */
            text-align: center;
            /* Center links */
        }

        /* Style for social media links */
        .social-media-link {
            display: inline-block;
            /* Display links inline */
            margin: 0 5px;
            /* Add horizontal margin */
        }

        /* Hover effect for NGO card */
        .ngo-card {
            transition: transform 0.3s, box-shadow 0.3s;
            /* Add transition for smooth hover effect */
        }

        .ngo-card:hover {
            transform: translateY(-5px);
            /* Move card up on hover */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1);
            /* Add shadow on hover */
        }
    </style>


    <script type="text/javascript">
        // bind on keyup event to the textbox search
        $(document).ready(function() { // on page load
            $('#txtSearch').keyup(function() {
                // alert(this.value);
                $.ajax({
                    type: "GET",
                    url: "search.php",
                    data: {
                        'name': this.value
                    },
                    success: function(response) {
                        // returned result
                        $('#result').html(response);
                    }
                });
            });
        });
    </script>

    <!-- Footer -->
    <?php include 'footer.php'; ?>
</body>

</html>